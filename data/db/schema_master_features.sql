CREATE TABLE IF NOT EXISTS master_features (
    date TEXT PRIMARY KEY,
    regime_t INTEGER,
    regime_t_plus_6m REAL,

    ti_gspc_sma_20 REAL,
    ti_gspc_sma_50 REAL,
    ti_gspc_sma_100 REAL,
    ti_gspc_sma_200 REAL,
    ti_gspc_ema_20 REAL,
    ti_gspc_ema_50 REAL,
    ti_gspc_ema_100 REAL,
    ti_gspc_ema_200 REAL,
    ti_gspc_macd REAL,
    ti_gspc_macd_histogram REAL,
    ti_gspc_rsi_14 REAL,
    ti_gspc_roc REAL,
    ti_gspc_adx REAL,
    ti_gspc_stochastic_k REAL,
    ti_gspc_stochastic_d REAL,
    ti_gspc_williams_r REAL,
    ti_gspc_price_vs_sma50_pct_diff REAL,
    ti_gspc_price_vs_sma200_pct_diff REAL,
    ti_gspc_sma20_vs_sma50_signal INTEGER,
    ti_gspc_sma50_vs_sma200_signal INTEGER,
    ti_gspc_rsi_14_zscore_60d REAL,
    ti_gspc_rsi_14_percentile_252d REAL,
    ti_gspc_macd_hist_roc_5d REAL,
    ti_gspc_adx_level_signal INTEGER,
    ti_gspc_stoch_k_oversold_signal INTEGER,
    ti_gspc_stoch_k_overbought_signal INTEGER,

    vol_vix REAL,
    vol_vix_sma_20 REAL,
    vol_vix_sma_50 REAL,
    vol_vvix REAL,
    vol_atr REAL,
    vol_skew_index REAL,
    vol_vix_roc_21d REAL,
    vol_vix_roc_63d REAL,
    vol_vix_zscore_63d REAL,
    vol_vix_percentile_252d REAL,
    vol_vix_vs_sma20_signal INTEGER,
    vol_vvix_roc_21d REAL,
    vol_vvix_zscore_63d REAL,
    vol_vvix_percentile_252d REAL,
    vol_vix_vvix_ratio REAL,
    vol_skew_index_zscore_63d REAL,
    vol_skew_index_percentile_252d REAL,
    vol_atr_pct_of_price REAL,

    pcr_equity_pc_ratio REAL,
    pcr_equity_pc_ratio_sma_5d REAL,
    pcr_equity_pc_ratio_sma_21d REAL,
    pcr_equity_pc_ratio_vs_sma21d_diff REAL,
    pcr_equity_pc_ratio_roc_5d REAL,
    pcr_equity_pc_ratio_roc_21d REAL,
    pcr_equity_pc_ratio_zscore_63d REAL,
    pcr_equity_pc_ratio_percentile_252d REAL,

    breadth_pct_above_sma50 REAL,
    breadth_pct_above_sma200 REAL,
    breadth_ad_line REAL,
    breadth_ad_ratio REAL,
    breadth_pct_above_sma50_roc_21d REAL,
    breadth_pct_above_sma200_roc_21d REAL,
    breadth_ad_line_roc_21d REAL,
    breadth_ad_line_sma_21d_diff REAL,
    breadth_ad_ratio_sma_5d REAL,

    nfp_value_pit REAL,
    nfp_yoy_change REAL,
    nfp_mom_change REAL,
    nfp_change_3m_annualized REAL,
    nfp_change_6m_annualized REAL,
    nfp_yoy_change_zscore_24m REAL,
    nfp_yoy_change_percentile_36m REAL,
    nfp_yoy_change_vs_sma12m_diff REAL,
    nfp_ref_date TEXT,

    icj_value_pit REAL,
    icj_value_pit_4wk_ma REAL,
    icj_change_1wk REAL,
    icj_change_4wk_ma_yoy REAL,
    icj_change_4wk_ma_zscore_52wk REAL,
    icj_change_4wk_ma_percentile_104wk REAL,
    icj_ref_date TEXT,

    cpi_value_pit REAL,
    cpi_yoy_change REAL,
    cpi_mom_change REAL,
    cpi_change_3m_annualized REAL,
    cpi_change_6m_annualized REAL,
    cpi_yoy_change_zscore_24m REAL,
    cpi_yoy_change_percentile_36m REAL,
    cpi_ref_date TEXT,

    retail_value_pit REAL,
    retail_yoy_change REAL,
    retail_mom_change REAL,
    retail_change_3m_annualized REAL,
    retail_yoy_change_zscore_24m REAL,
    retail_yoy_change_percentile_36m REAL,
    retail_ref_date TEXT,

    m2_value_pit REAL,
    m2_yoy_change REAL,
    m2_mom_change REAL,
    m2_change_3m_annualized REAL,
    m2_yoy_change_zscore_24m REAL,
    m2_yoy_change_percentile_60m REAL,
    m2_ref_date TEXT,

    houst_value_pit REAL,
    houst_yoy_change REAL,
    houst_mom_change REAL,
    houst_change_3m_sma REAL,
    houst_yoy_change_zscore_24m REAL,
    houst_ref_date TEXT,

    hpi_value_pit REAL,
    hpi_yoy_change REAL,
    hpi_mom_change REAL,
    hpi_yoy_change_zscore_36m REAL,
    hpi_yoy_change_percentile_60m REAL,
    hpi_ref_date TEXT,

    aaii_bullish_pct_pit REAL,
    aaii_neutral_pct_pit REAL,
    aaii_bearish_pct_pit REAL,
    aaii_bull_bear_spread_pct_pit REAL,
    aaii_bullish_8wk_ma_pct_pit REAL,
    aaii_bull_bear_spread_pct_sma_4wk REAL,
    aaii_bull_bear_spread_pct_zscore_52wk REAL,
    aaii_bullish_pct_percentile_52wk REAL,
    aaii_bearish_pct_percentile_52wk REAL,
    aaii_ref_date TEXT,

    finra_debit_balances_pit REAL,
    finra_free_credit_cash_pit REAL,
    finra_free_credit_margin_pit REAL,
    finra_debit_balances_yoy_change REAL,
    finra_debit_balances_roc_3m REAL,
    finra_debit_balances_roc_6m REAL,
    finra_normalized_margin_debt REAL,
    finra_margin_debt_vs_free_credit_ratio REAL,
    finra_debit_balances_yoy_change_zscore_24m REAL,
    finra_ref_date TEXT,

    conf_value_pit REAL,
    conf_value_mom_diff REAL,
    conf_value_yoy_diff REAL,
    conf_value_sma_3m REAL,
    conf_value_sma_6m REAL,
    conf_value_zscore_24m REAL,
    conf_value_percentile_36m REAL,
    conf_ref_date TEXT,

    fg_value REAL,
    fg_fg_value_sma_5d REAL,
    fg_fg_value_sma_21d REAL,
    fg_fg_value_vs_sma21d_diff REAL,
    fg_fg_value_roc_5d REAL,
    fg_is_extreme_fear_signal INTEGER,
    fg_is_extreme_greed_signal INTEGER,
    fg_fg_value_percentile_252d REAL,

    junk_spread_spread_value_pit REAL,
    junk_spread_spread_value_sma_21d REAL,
    junk_spread_spread_value_sma_63d REAL,
    junk_spread_spread_value_vs_sma63d_diff REAL,
    junk_spread_spread_value_roc_21d REAL,
    junk_spread_spread_value_roc_63d REAL,
    junk_spread_spread_value_zscore_252d REAL,
    junk_spread_spread_value_percentile_252d REAL,
    junk_spread_spread_widening_signal_5d INTEGER,
    junk_spread_ref_date TEXT,

    corp_oas_value REAL,

    tsy_spread_10y2y_value REAL,
    tsy_spread_10y3m_value REAL,

    em_tbill_spread_spread_value REAL,
    em_tbill_spread_ref_date TEXT,

    dxy_dxy_value REAL,
    dxy_pct_change_21d REAL,
    dxy_z_score_return_3m REAL,
    dxy_percentile_rank_1y REAL,
    dxy_volatility_30d REAL,
    dxy_slope_30d_regression REAL,

    em_close_price REAL,
    em_pct_return_21d REAL,
    em_z_score_return_3m REAL,
    em_above_sma_200 INTEGER,
    em_relative_performance_spy REAL,
    em_beta_to_spy_90d REAL,

    oil_price REAL,
    oil_pct_change_1m REAL,
    oil_pct_change_6m REAL,
    oil_z_score_return_3m REAL,
    oil_volatility_30d REAL,

    bdi_bdi_value REAL,
    bdi_pct_change_1m REAL,
    bdi_z_score_return_3m REAL,
    bdi_ema_30_minus_ema_90 REAL,
    bdi_bdi_oil_ratio REAL,

    gex_gex_value REAL,
    gex_gex_percentile_rank_1y REAL,
    gex_gex_z_score_3m REAL,

    sentconf_smci_value REAL,
    sentconf_dmci_value REAL,
    sentconf_smci_pct_dmci_ratio REAL,
    sentconf_smci_value_roc_1m REAL,
    sentconf_smci_value_roc_3m REAL,
    sentconf_smci_value_roc_6m REAL,
    sentconf_dmci_value_roc_1m REAL,
    sentconf_dmci_value_roc_3m REAL,
    sentconf_dmci_value_roc_6m REAL,
    sentconf_smci_pct_dmci_ratio_roc_1m REAL,
    sentconf_smci_pct_dmci_ratio_roc_3m REAL,
    sentconf_smci_pct_dmci_ratio_roc_6m REAL,
    sentconf_smci_value_sma_3m REAL,
    sentconf_smci_value_sma_6m REAL,
    sentconf_dmci_value_sma_3m REAL,
    sentconf_dmci_value_sma_6m REAL,
    sentconf_smci_pct_dmci_ratio_sma_3m REAL,
    sentconf_smci_pct_dmci_ratio_sma_6m REAL,
    sentconf_smci_value_percentile_1y REAL,
    sentconf_smci_value_percentile_2y REAL,
    sentconf_dmci_value_percentile_1y REAL,
    sentconf_dmci_value_percentile_2y REAL,
    sentconf_smci_pct_dmci_ratio_percentile_1y REAL,
    sentconf_smci_pct_dmci_ratio_percentile_2y REAL,

    smi_smi_value REAL,
    smi_spy_open REAL,
    smi_spy_close REAL,
    smi_smi_roc_21d REAL,
    smi_smi_roc_63d REAL,
    smi_smi_roc_126d REAL,
    smi_smi_sma_20d REAL,
    smi_smi_sma_50d REAL,
    smi_smi_sma_200d REAL,
    smi_smi_vs_sma20_signal INTEGER,
    smi_smi_sma20_vs_sma50_signal INTEGER,
    smi_smi_percentile_252d REAL,
    smi_smi_percentile_504d REAL,

    stk_bond_diff_return_diff_20d REAL,
    stk_bond_diff_return_diff_20d_sma_20 REAL,
    stk_bond_diff_return_diff_20d_sma_50 REAL,
    stk_bond_diff_return_diff_20d_zscore_63d REAL,
    stk_bond_diff_return_diff_20d_zscore_252d REAL,

    djt_vs_gspc_rs_ratio REAL,
    djt_vs_gspc_log_diff_1d REAL,
    djt_vs_gspc_log_diff_5d REAL,
    djt_vs_gspc_log_diff_20d REAL,
    djt_vs_gspc_return_spread_1d REAL,
    djt_vs_gspc_z_score_spread_1d_window20d REAL,
    djt_vs_gspc_z_score_spread_1d_window60d REAL,
    rut_vs_gspc_rs_ratio REAL,
    rut_vs_gspc_log_diff_1d REAL,
    rut_vs_gspc_log_diff_5d REAL,
    rut_vs_gspc_log_diff_20d REAL,
    rut_vs_gspc_return_spread_1d REAL,
    rut_vs_gspc_z_score_spread_1d_window20d REAL,
    rut_vs_gspc_z_score_spread_1d_window60d REAL,
    qqq_vs_dju_rs_ratio REAL,
    qqq_vs_dju_log_diff_1d REAL,
    qqq_vs_dju_log_diff_5d REAL,
    qqq_vs_dju_log_diff_20d REAL,
    qqq_vs_dju_return_spread_1d REAL,
    qqq_vs_dju_z_score_spread_1d_window20d REAL,
    qqq_vs_dju_z_score_spread_1d_window60d REAL,
    xlv_vs_gspc_rs_ratio REAL,
    xlv_vs_gspc_log_diff_1d REAL,
    xlv_vs_gspc_log_diff_5d REAL,
    xlv_vs_gspc_log_diff_20d REAL,
    xlv_vs_gspc_return_spread_1d REAL,
    xlv_vs_gspc_z_score_spread_1d_window20d REAL,
    xlv_vs_gspc_z_score_spread_1d_window60d REAL,

    spy_tlt_ratio_raw_ratio REAL,
    spy_tlt_ratio_roc_21d REAL,
    spy_tlt_ratio_roc_63d REAL,
    spy_tlt_ratio_roc_126d REAL,
    spy_tlt_ratio_roc_252d REAL,
    spy_tlt_ratio_sma_20d REAL,
    spy_tlt_ratio_sma_50d REAL,
    spy_tlt_ratio_sma_200d REAL,
    spy_tlt_ratio_zscore_value_63d REAL,
    spy_tlt_ratio_zscore_value_252d REAL,
    spy_tlt_ratio_percentile_1y REAL,
    spy_tlt_ratio_vs_sma20_signal INTEGER,
    spy_tlt_ratio_sma20_vs_sma50_signal INTEGER,
    gold_silver_ratio_raw_ratio REAL,
    gold_silver_ratio_roc_21d REAL,
    gold_silver_ratio_roc_63d REAL,
    gold_silver_ratio_roc_126d REAL,
    gold_silver_ratio_roc_252d REAL,
    gold_silver_ratio_sma_20d REAL,
    gold_silver_ratio_sma_50d REAL,
    gold_silver_ratio_sma_200d REAL,
    gold_silver_ratio_zscore_value_63d REAL,
    gold_silver_ratio_zscore_value_252d REAL,
    gold_silver_ratio_percentile_1y REAL,
    gold_silver_ratio_vs_sma20_signal INTEGER,
    gold_silver_ratio_sma20_vs_sma50_signal INTEGER,
    copper_gold_ratio_raw_ratio REAL,
    copper_gold_ratio_roc_21d REAL,
    copper_gold_ratio_roc_63d REAL,
    copper_gold_ratio_roc_126d REAL,
    copper_gold_ratio_roc_252d REAL,
    copper_gold_ratio_sma_20d REAL,
    copper_gold_ratio_sma_50d REAL,
    copper_gold_ratio_sma_200d REAL,
    copper_gold_ratio_zscore_value_63d REAL,
    copper_gold_ratio_zscore_value_252d REAL,
    copper_gold_ratio_percentile_1y REAL,
    copper_gold_ratio_vs_sma20_signal INTEGER,
    copper_gold_ratio_sma20_vs_sma50_signal INTEGER,

    sp500_ret_1d REAL,
    sp500_ret_5d REAL,
    sp500_ret_21d REAL,
    sp500_ret_63d REAL,
    sp500_ret_126d REAL,
    sp500_ret_252d REAL,
    sp500_ret_512d REAL,
    sp500_log_vol_1d REAL,
    sp500_log_vol_5d REAL,
    sp500_log_vol_21d REAL,
    sp500_log_vol_63d REAL,
    sp500_log_vol_126d REAL,
    sp500_log_vol_252d REAL,
    sp500_ret_1d_zscore_63d REAL,
    sp500_ret_5d_zscore_63d REAL,
    sp500_ret_21d_zscore_63d REAL,
    sp500_ret_63d_zscore_63d REAL,
    sp500_ret_126d_zscore_63d REAL,
    sp500_ret_252d_zscore_63d REAL,
    sp500_ret_512d_zscore_63d REAL,
    sp500_log_vol_1d_zscore_63d REAL,
    sp500_log_vol_5d_zscore_63d REAL,
    sp500_log_vol_21d_zscore_63d REAL,
    sp500_log_vol_63d_zscore_63d REAL,
    sp500_log_vol_126d_zscore_63d REAL,
    sp500_log_vol_252d_zscore_63d REAL
);
